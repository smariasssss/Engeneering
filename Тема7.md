# Тема 7. Работа с файлами (ввод, вывод)
Отчет по Теме №7 выполнила:
- Санжанова Мария Олеговна
- ПИЭ-21-2

| Задание | Лаб_раб | Сам_раб     |
| ------ | ------ |-------------|
| Задание 1 | + | +   |
| Задание 2 | + | +   |
| Задание 3 | + | +   |
| Задание 4 | + | +   |
| Задание 5 | + | +   |
| Задание 6 | + | Нет |
| Задание 7 | + | Нет |
| Задание 8 | + | Нет |
| Задание 9 | + | Нет |
| Задание 10 | + | Нет |

знак "+" - задание выполнено; знак "-" - задание не выполнено;

Работу проверили:
- к.э.н., доцент Панов М.А.

## Лабораторная работа.
### Задание 1 и 2.
1. Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.
2. Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию ореn()/close().
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/1%2C2.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/1%2C2_1.png)
### Выводы.
Сначала код открывает файл `input.txt` с помощью функции `open()`, создавая объект файла `f`. Затем вызывает метод `readline()`, что приводит к считыванию и выводу первой строки из файла. После того как строка считана и выведена, файл закрывается с помощью метода `close()`.

### Задание 3.
Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию ореn()/close().
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/3.png)
### Выводы.
Программа открывает файл `'input.txt'`, считывает все строки из файла с использованием метода `readlines()`, а затем закрывает файл с помощью метода `close()`.

### Задание 4.
Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open().
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/4.png)
### Выводы.
Этот код открывает файл "input.txt" для чтения с использованием контекстного менеджера `with open('input.txt') as f` и затем выводит все строки из файла в виде списка с использованием функции `readlines()`.

### Задание 5.
Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/5.png)
### Выводы.
Данный код просто открывает файл `input.txt` и построчно выводит его содержимое в консоль.

### Задание 6.
Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом. Обязательно проверьте сам файл, чтобы изменения в нем тоже отображались.
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/6.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/6_1.png)
### Выводы.
Сначала код открывает файл `input.txt` с режимом `'a+'`, что позволяет как добавлять, так и читать данные из файла. Строка "I am additional line" добавляется в конец файла. Затем файл снова открывается с использованием режима по умолчанию (`'r'`), и все строки из файла считываются с помощью метода `readlines()` и сохраняются в переменной `result`. Содержимое файла, включая новую добавленную строку, выводится на экран с помощью `print(result)`.

### Задание 7.
Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно вами составленного списка. Также не забудьте проверить что измененная вами информация сохранилась в файле.
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/7.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/7_1.png)
### Выводы.
В начале код создает список строк `lines`, содержащий три элемента: 'one', 'two' и 'three'. Затем код открывает файл 'input.txt' для записи с использованием контекстного менеджера `with open('input.txt', 'w') as f`. В цикле `for` каждая строка из списка `lines` дополняется текстом 'Cycle run ' и записывается в файл с использованием метода `write()`. Это добавляет каждую строку с текстом 'Cycle run ' перед ней в файл. После завершения записи всех строк в файл, код выводит 'Done!' в консоль.

### Задание 8.
Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, как и всех подкаталогов при помощи функции print _docs(directory).
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/8.png)
### Выводы.
В представленном коде определена функция `print_docs(directory)`, которая просматривает содержимое указанной директории и выводит информацию о директориях и файлах в этой директории. Код внутри функции использует функцию `os.walk()` для обхода файловой системы. В данном случае, код попытается просмотреть содержимое директории `/Library/User Pictures`. Он выведет информацию о наличии поддиректорий и файлов в этой директории, а затем выведет разделитель, который состоит из 40 символов `"-"`. 

### Задание 9.
Документ «input txt» содержит следующий текст: 
*Приветствие
Спасибо
Извините
Пожалуйста До свидания
Ты готов?
Как дела?
С днем рождения!
Удача!
Я тебя люблю.*

Требуется реализовать функцию, которая выводит слово, имеющее максимальную длину (или список слов, если таковых несколько).
Проверьте работоспособность программы на своем наборе данных. 
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/9.png)
### Выводы.
Этот код представляет функцию `longest_words(file)`, которая принимает имя файла `file`, считывает из него слова, и возвращает самое длинное слово или слова (если есть несколько с максимальной длиной). 
Рассмотрим ход программы подробнее:
Функция `longest_words(file)` начинается с открытия указанного файла `file` с использованием контекстного менеджера `with open(file, encoding='utf-8') as f`. Он предполагает, что файл в кодировке UTF-8. Содержимое файла считывается и разбивается на слова с использованием метода `split()`, и слова сохраняются в списке `words`. Далее, код определяет максимальную длину слова в списке `words` с помощью функции `len(max(words, key=len))`. Затем, он проходит по списку `words` и сравнивает длину каждого слова с максимальной длиной. Если длина слова равна максимальной длине, это слово добавляется в список `sought_words`. После завершения цикла, код проверяет, сколько слов нашлось с максимальной длиной. Если найдено только одно такое слово, оно возвращается как строка. Если найдено несколько слов с максимальной длиной, возвращается список этих слов.

### Задание 10.
Требуется создать csv-файл «rows 300.csv» со следующими столбцами:
- № - номер по порядку (от 1 до 300);
- Секунда - текущая секунда на вашем ПК;
- Микросекунда - текущая миллисекунда на часах.

Для наглядности на каждой итерации цикла искусственно приостанавливайте скрипт на 0,01 секунды.
### Результат.
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/10.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/10_1.png)
### Выводы.
Этот код создает и записывает данные в CSV-файл `rows_300.csv`. В файле записывается информация о номере строки, текущей секунде и текущей микросекунде, и это происходит в цикле с паузой.
Программа начинается с импорта модулей `csv`, `datetime` и `time`. Затем код открывает файл `rows_300.csv` для записи (режим `'w'`), указывает кодировку `'utf-8'` и устанавливает `newline=''`, чтобы избежать автоматического добавления пустых строк между записями. С использованием модуля `csv`, создается объект `writer`, который позволяет записывать данные в файл в формате CSV. С помощью метода `writer.writerow()` вставляются заголовки столбцов в первую строку файла. Затем выполняется цикл, который записывает данные для каждой строки от 1 до 300. В каждой строке записывается номер строки, текущая секунда и текущая микросекунда с использованием модуля `datetime.datetime.now()`. Между записями выполняется пауза в 0,01 секунд с использованием функции `time.sleep(0.01)`.

## Самостоятельная работа.
### Задание 1.
Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. Результатом выполнения задачи будет: скриншот файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация.
### Результат.
```python
import re
from collections import Counter

# Открываем файл для чтения
with open('input.txt', 'r') as file:
    text = file.read()

# Разбиваем текст на слова с помощью регулярного выражения
words = re.findall(r'\w+', text.lower())

# Создаем счетчик слов
word_counter = Counter(words)

# Находим самое часто встречающееся слово
most_common_word, most_common_count = word_counter.most_common(1)[0]

# Выводим результат
print(f"Количество слов в файле: {len(words)}")
print(f"Самое часто встречающееся слово: '{most_common_word}' (встречается {most_common_count} раз)")
```
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/11.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/11_2.png)
### Выводы.
Код начинается с импорта модулей `re` и `Counter`. Модуль `re` используется для работы с регулярными выражениями, а модуль `Counter` из библиотеки `collections` помогает подсчитать количество встречающихся слов. Далее, код открывает файл `input.txt` для чтения и считывает его содержимое в переменную `text`.
С помощью `re.findall(r'\w+', text.lower())` текст разбивается на слова, переводится в нижний регистр, и результат сохраняется в списке `words`. Регулярное выражение `\w+` находит все последовательности букв и цифр, то есть слова. Создается счетчик `word_counter` с использованием `Counter`, который подсчитывает количество вхождений каждого слова из списка `words`. С помощью метода `most_common(1)` из счетчика `word_counter` находится самое часто встречающееся слово и его количество.
Результат выводится в консоль с использованием функции `print()`. Выводится количество слов в файле и самое часто встречающееся слово, а также сколько раз оно встречается.

### Задание 2.
У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу что вас ничего не устраивает и нужно все делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять ее в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. Результатом выполнения задачи будет: скриншот файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.
### Результат.
```python
import os

# Функция для ввода информации о расходах
def input_expense():
    date = input("Введите дату расхода: ")
    description = input("Введите описание расхода: ")
    amount = float(input("Введите сумму расхода: "))

    return f"{date},{description},{amount}\n"

# Функция для записи расходов в файл
def save_expense(expense):
    with open('Список расходов.txt', 'a') as file:
        file.write(expense)

# Функция для вывода всех расходов из файла
def view_expenses():
    if os.path.exists('Список расходов.txt'):
        with open('Список расходов.txt', 'r') as file:
            expenses = file.readlines()
            if expenses:
                print("Список расходов:")
                for expense in expenses:
                    date, description, amount = expense.strip().split(',')
                    print(f"Дата: {date}, Описание: {description}, Сумма: {amount}")
            else:
                print("Нет записей о расходах.")
    else:
        print("Файл с расходами не существует.")

# Основной цикл программы
while True:
    print("\n1. Ввести расход")
    print("2. Просмотреть расходы")
    print("3. Выход")
    choice = input("Выберите действие (1/2/3): ")

    if choice == '1':
        expense = input_expense()
        save_expense(expense)
        print("Расход успешно сохранен.")
    elif choice == '2':
        view_expenses()
    elif choice == '3':
        break
    else:
        print("Некорректный выбор. Пожалуйста, введите 1, 2 или 3.")
```
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/12.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/12_2.png)
### Выводы.
Этот код позволяет пользователям вести учет своих расходов, сохраняя их в файле, и затем просматривать их в будущем.
Функция `input_expense()` позволяет пользователю ввести дату, описание и сумму расходов. Введенные данные сохраняются в формате строки и возвращаются в виде строки, где элементы разделены запятыми. Функция `save_expense()` открывает файл "Список расходов.txt" для добавления и записывает в него переданный расход. Функция `view_expenses()` проверяет, существует ли файл "Список расходов.txt". Если файл существует, она считывает его содержимое, разбирает данные о расходах и выводит их в консоль.
Основной цикл программы предоставляет пользователю следующие опции:
   - `1` - Ввести расход, что вызывает `input_expense()`, сохраняет введенные данные и выводит сообщение об успешном сохранении.
   - `2` - Просмотреть расходы, что вызывает `view_expenses()` и выводит список ранее введенных расходов.
   - `3` - Выход из программы.

Программа предлагает пользователю выбор действия и продолжает выполняться, пока пользователь не выберет опцию "3" для выхода.

### Задание 3.
Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита; число слов; число строк.

• Текст в файле:
Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.

• Ожидаемый результат:
Input file contains:
108 letters
20 words
4 lines
### Результат.
```python
# Открываем файл для чтения
with open('input.txt', 'r') as file:
    text = file.read()

# Считаем количество букв латинского алфавита
letters = sum(1 for char in text if char.isalpha() and char.isascii())

# Разбиваем текст на слова и считаем их количество
words = len(text.split())

# Считаем количество строк в тексте
lines = text.count('\n') + 1  # Минимум одна строка

# Выводим результат
print("Input file contains:")
print(f"{letters} letters")
print(f"{words} words")
print(f"{lines} lines")
```
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/13.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/13_2.png)
### Выводы.
 Код начинается с открытия файла `input.txt` для чтения с использованием контекстного менеджера `with open() as file`. Это обеспечивает корректное закрытие файла после чтения. Содержимое файла считывается в строку `text` с помощью метода `read()`. Далее, код использует выражение `sum(1 for char in text if char.isalpha() and char.isascii())` для подсчета букв латинского алфавита в тексте. Количество слов в тексте вычисляется с помощью метода `split()`, который разделяет текст по пробелам, и затем считает количество элементов получившегося списка. Для подсчета количества строк в тексте, код использует метод `count('\n')`, который подсчитывает количество символов новой строки в тексте, и затем добавляет 1, чтобы учесть минимум одну строку. Затем код выводит результаты анализа, включая количество букв, слов и строк в файле, с использованием функции `print()`.

### Задание 4.
Напишите программу, которая получает на вход предложение, выводит его в терминал, заменяя все запрещенные слова звездочками * (количество звездочек равно количеству букв в слове). Запрещенные слова, разделенные символом пробела, хранятся в текстовом файле input.txt. Все слова в этом файле записаны в нижнем регистре. Программа должна заменить запрещенные слова, где бы они ни встречались, даже в середине другого слова. Замена производится независимо от регистра: если файл input.txt содержит запрещенное слово exam, то слова exam, Exam, ExaM, EXAM и ехАm должны быть заменены на ****

• Запрещенные слова: hello email python the exam wor is
• Предложение для проверки: Hello, world! Python IS the programming language of thE future. My EMAIL is....
PYTHON is awesome!!!!

• Ожидаемый результат:
*****, ****Id! ****** ** *** programming language of *** future. My
***** ** … . 
****** ** awesome!!!!
### Результат.
```python
# Загружаем запрещенные слова из файла input.txt и преобразуем их в набор
with open('input.txt', 'r') as file:
    forbidden_words = file.read().split()

# Функция для замены запрещенных слов
def replace_forbidden_words(text, forbidden_words):
    def replace_word(match):
        word = match.group(0)
        if word.lower() in forbidden_words:
            return '*' * len(word)
        else:
            return word

    # Используем регулярное выражение для поиска всех слов в тексте
    import re
    pattern = r'\b\w+\b'
    result = re.sub(pattern, replace_word, text, flags=re.IGNORECASE)
    return result

# Ввод предложения
sentence = "Hello, world! Python IS the programming language of thE future. My EMAIL is.... PYTHON is awesome!!!!"

# Замена запрещенных слов
modified_sentence = replace_forbidden_words(sentence, forbidden_words)

# Вывод результата
print(modified_sentence)
```
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/14.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/14_2.png)
### Выводы.
Этот код загружает список запрещенных слов из файла `input.txt`, затем использует регулярные выражения для замены этих запрещенных слов в предложении и выводит модифицированное предложение с заменой на символы ***.
Функция `replace_forbidden_words()` определена для замены запрещенных слов в тексте. Она использует регулярное выражение, чтобы найти все слова в тексте и проверить, если они есть в списке запрещенных слов (независимо от регистра). Если слово найдено в списке, оно заменяется на символы ***. В противном случае, оно остается без изменений. Затем предложение, которое нужно обработать, хранится в переменной `sentence`. Функция `replace_forbidden_words()` вызывается для предложения, и результат замены запрещенных слов сохраняется в переменной `modified_sentence`. Изменённое предложение выводится с использованием функции `print()`.

### Задание 5.
Самостоятельно придумайте и решите задачу, которая будет взаимодействовать с текстовым файлом.

**Условие задачи:**
У вас есть файл <имя_файла>.txt, в котором хранятся данные о студентах в следующем формате: Имя Фамилия, Год рождения, Средний балл.
Ваша задача - написать программу, которая считывает данные из файла и выполняет следующие действия:
1. Вывести общее количество студентов в файле.
2. Найти старшего и младшего студентов (по году рождения) и вывести их данные.
3. Вычислить средний средний балл среди студентов и вывести его.
### Результат.
```python
# Открываем файл для чтения
with open('input.txt', 'r') as file:
    lines = file.readlines()

students = []

# Разбираем строки из файла и создаем список студентов
for line in lines[1:]:  # Пропускаем первую строку (заголовок)
    parts = line.strip().split(', ')
    if len(parts) == 3:
        name, birth_year, gpa = parts
        students.append({'name': name, 'birth_year': int(birth_year), 'gpa': float(gpa)})

# Выводим общее количество студентов
print(f"Общее количество студентов: {len(students)}")

# Находим старшего и младшего студентов
oldest_student = min(students, key=lambda x: x['birth_year'])
youngest_student = max(students, key=lambda x: x['birth_year'])

print(f"Старший студент: {oldest_student['name']}, {oldest_student['birth_year']}")
print(f"Младший студент: {youngest_student['name']}, {youngest_student['birth_year']}")

# Вычисляем средний балл среди студентов
total_gpa = sum(student['gpa'] for student in students)
average_gpa = total_gpa / len(students)

print(f"Средний средний балл: {average_gpa:.2f}")
```

![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/15.png)
![](https://github.com/smariasssss/SoftwareEngineering/blob/efa193521576cec96dfe4c5e61cc0abf585f7004/pics/15_2.png)
### Выводы.
Этот код выполняет анализ данных о студентах из файла, вычисляет общее количество студентов, находит старшего и младшего студентов по году рождения и вычисляет средний средний балл среди студентов. Вот вывод по коду:
Создается пустой список `students`, который будет использоваться для хранения данных о студентах. В цикле `for` обрабатываются строки из файла, начиная со второй строки (первая строка считается заголовком). Далее, код выводит общее количество студентов, подсчитанное с помощью `len(students)`. С помощью функций `min()` и `max()` находятся старший и младший студенты на основе года рождения. Эти студенты хранятся в переменных `oldest_student` и `youngest_student`. Вычисляется сумма средних баллов всех студентов и средний средний балл, который выводится с точностью до двух знаков после запятой.

## Общие выводы по теме.
Подводя итоги по пройденной теме, хочу отметить, что в работе с файлами в Python вы можете выполнять операции ввода и вывода данных. Эта тема важна для обработки файлов, хранения данных, а также для взаимодействия с внешними источниками данных. Работа с файлами является важной частью программирования. Понимание основ работы с файлами позволяет обрабатывать и сохранять данные, что чрезвычайно полезно в различных задачах.
